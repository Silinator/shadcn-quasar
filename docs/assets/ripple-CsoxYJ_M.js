var F=Object.defineProperty,I=Object.defineProperties,S=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,W=(t,e,r)=>e in t?F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,d=(t,e)=>{for(var r in e||(e={}))A.call(e,r)&&W(t,r,e[r]);if(b)for(var r of b(e))V.call(e,r)&&W(t,r,e[r]);return t},$=(t,e)=>I(t,S(e)),T={directive:"wave",color:"currentColor",initialOpacity:.2,finalOpacity:.1,duration:.4,dissolveDuration:.15,waitForRelease:!0,easing:"ease-out",cancellationPeriod:75,trigger:"auto",tagName:"div",disabled:!1,respectDisabledAttribute:!0,respectPrefersReducedMotion:!0,stopPropagation:!1},M=t=>"config"in t&&"globalProperties"in t.config,x=t=>{let e;return t==="vue2"?e=!1:t==="vue3"?e=!0:e=M(t),e?{mounted:"mounted",updated:"updated"}:{mounted:"inserted",updated:"componentUpdated"}},D=t=>typeof t=="string"&&t!=="auto",_=(t,e)=>{t.dataset.vWaveBoundary=D(e)?e:"true"},N=({borderTopLeftRadius:t,borderTopRightRadius:e,borderBottomLeftRadius:r,borderBottomRightRadius:i},a)=>{const o=document.createElement(a);return o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.display="block",o.style.position="absolute",o.style.borderRadius=`${t} ${e} ${i} ${r}`,o.style.overflow="hidden",o.style.pointerEvents="none",o.style.webkitMaskImage="-webkit-radial-gradient(white, black)",o.dataset.vWaveContainerInternal="true",o},j=({x:t,y:e},r,i)=>{const a=document.createElement("div");return a.style.position="absolute",a.style.width=`${r}px`,a.style.height=`${r}px`,a.style.top=`${e}px`,a.style.left=`${t}px`,a.style.background=i.color,a.style.borderRadius="50%",a.style.opacity=`${i.initialOpacity}`,a.style.transform="translate(-50%,-50%) scale(0)",a.style.transition=`transform ${i.duration}s ${i.easing}, opacity ${i.duration}s ${i.easing}`,a};function w(t,e,r,i){const a=t-r,o=e-i;return Math.sqrt(a*a+o*o)}function q({x:t,y:e},{width:r,height:i}){const a=w(t,e,0,0),o=w(t,e,r,0),g=w(t,e,0,i),n=w(t,e,r,i);return Math.max(a,o,g,n)}var B=({x:t,y:e},{top:r,left:i})=>({x:t-i,y:e-r}),U=(t,e)=>{e.position==="static"&&(["top","left","right","bottom"].forEach(r=>{e[r]&&e[r]!=="auto"&&console.warn("[v-wave]:",t,`You're using a \`static\` positioned element with a non-auto value (${e[r]}) for \`${r}\`.`,"It's position will be changed to relative while displaying the wave which might cause the element to visually jump.")}),t.dataset.originalPositionValue=t.style.position,t.style.position="relative")},C=t=>{var e;t.style.position=(e=t.dataset.originalPositionValue)!=null?e:"",delete t.dataset.originalPositionValue},P="vWaveCountInternal";function H(t){const e=h(t);k(t,e+1)}function L(t){const e=h(t);k(t,e-1)}function k(t,e){t.dataset[P]=e.toString()}function h(t){var e;return Number.parseInt((e=t.dataset[P])!=null?e:"0",10)}function O(t){delete t.dataset[P]}var Y=2.05,E=(t,e,r)=>{if(r.disabled||r.respectDisabledAttribute&&e.hasAttribute("disabled")||r.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const i=e.getBoundingClientRect(),a=window.getComputedStyle(e),o=B(t,i),g=Y*q(o,i),n=e.querySelector("[data-v-wave-container-internal]"),s=n??N(a,r.tagName),c=j(o,g,r);H(e),U(e,a),s.appendChild(c),n||e.appendChild(s);let p=!r.waitForRelease;const l=m=>{typeof m<"u"&&(document.removeEventListener("pointerup",l),document.removeEventListener("pointercancel",l)),p?u():p=!0},u=()=>{c.style.transition=`opacity ${r.dissolveDuration}s linear`,c.style.opacity="0",setTimeout(()=>{c.remove(),L(e),h(e)===0&&(O(e),s.remove(),C(e))},r.dissolveDuration*1e3)};r.waitForRelease&&(document.addEventListener("pointerup",l),document.addEventListener("pointercancel",l));const v=setTimeout(()=>{document.removeEventListener("pointercancel",f),requestAnimationFrame(()=>{c.style.transform="translate(-50%,-50%) scale(1)",c.style.opacity=`${r.finalOpacity}`,setTimeout(()=>l(),r.duration*1e3)})},r.cancellationPeriod),f=()=>{clearTimeout(v),c.remove(),L(e),h(e)===0&&(O(e),s.remove(),C(e)),document.removeEventListener("pointerup",l),document.removeEventListener("pointercancel",l),document.removeEventListener("pointercancel",f)};document.addEventListener("pointercancel",f)},y=new WeakMap,G=(t,e)=>(r,i)=>{if(!y.has(e))return;const a=d(d({},t),y.get(e));if(a.stopPropagation&&r.stopPropagation(),a.trigger===!1)return E(r,e,a);if(D(a.trigger))return;const o=e.querySelector('[data-v-wave-trigger="true"]');!o&&a.trigger===!0||o&&!r.composedPath().includes(o)||E(i??r,e,$(d({},a),{waitForRelease:i?!1:a.waitForRelease}))},R=(t={},e="vue3")=>{const r=d(d({},T),t),i=x(e),a=n=>{if(n.detail!==0)return;const s=n.currentTarget,c=s.dataset.vWaveTrigger;document.querySelectorAll(`[data-v-wave-boundary="${c}"]`).forEach(l=>{const u=n.type==="click";let v;if(u){const m=s.getBoundingClientRect();v={x:m.left+m.width/2,y:m.top+m.height/2}}else v=n;const f=d(d({},r),y.get(l));E(v,l,$(d({},f),{waitForRelease:u?!1:f.waitForRelease}))})},o={[i.mounted](n,{value:s={}}){var c;y.set(n,s),_(n,(c=s==null?void 0:s.trigger)!=null?c:r.trigger);const p=G(r,n);n.addEventListener("pointerdown",p),n.addEventListener("click",l=>{if(l.detail!==0)return;const u=n.getBoundingClientRect(),v={x:u.left+u.width/2,y:u.top+u.height/2};p(l,v)})},[i.updated](n,{value:s={}}){var c;y.set(n,s),_(n,(c=s==null?void 0:s.trigger)!=null?c:r.trigger)}},g={[i.mounted](n,{arg:s="true"}){n.dataset.vWaveTrigger=s,s!=="true"&&(n.addEventListener("pointerdown",a),n.addEventListener("click",a))},[i.updated](n,{arg:s="true"}){n.dataset.vWaveTrigger=s,s==="true"?(n.removeEventListener("pointerdown",a),n.removeEventListener("click",a)):(n.addEventListener("pointerdown",a),n.addEventListener("click",a))}};return{wave:o,vWave:o,waveTrigger:g,vWaveTrigger:g}},X={install(t,e={}){if(this.installed)return;this.installed=!0;const r=d(d({},T),e),{vWave:i,vWaveTrigger:a}=R(r,t);t.directive(r.directive,i),t.directive(`${r.directive}-trigger`,a)},installed:!1,createLocalWaveDirective:R},z=X;function J(){const t=getComputedStyle(document.documentElement);return{initialOpacity:parseFloat(t.getPropertyValue("--ripple-initial-opacity"))||.3,finalOpacity:parseFloat(t.getPropertyValue("--ripple-final-opacity"))||.2,duration:parseFloat(t.getPropertyValue("--ripple-duration"))||.35}}const{wave:K}=z.createLocalWaveDirective(J());export{K as r};
